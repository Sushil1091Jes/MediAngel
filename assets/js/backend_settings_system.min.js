!function(){"use strict";function e(){}e.prototype.save=function(e){var a=GlobalVariables.baseUrl+"/index.php/backend_api/ajax_save_settings",n={csrfToken:GlobalVariables.csrfToken,settings:JSON.stringify(e),type:BackendSettings.SETTINGS_SYSTEM};$.post(a,n).done(function(){Backend.displayNotification(EALang.settings_saved),$("#header-logo span").text($("#company-name").val());var e=$("#book-advance-timeout").val(),a=Math.floor(e/60),n=e%60;$("#book-advance-timeout-helper").text(EALang.book_advance_timeout_hint.replace("{$limit}",("0"+a).slice(-2)+":"+("0"+n).slice(-2))),GlobalVariables.timeFormat=$("#time-format").val(),GlobalVariables.firstWeekday=$("#first-weekday").val();var t=BackendSettings.wp.get();BackendSettings.wp.setup(t),BackendSettings.wp.timepickers(!1)}).fail(GeneralFunctions.ajaxFailureHandler)},e.prototype.get=function(){var n=[];return $("#general").find("input, select").not("input:checkbox").each(function(e,a){n.push({name:$(a).attr("data-field"),value:$(a).val()})}),n.push({name:"customer_notifications",value:$("#customer-notifications").prop("checked")?"1":"0"}),n.push({name:"require_captcha",value:$("#require-captcha").prop("checked")?"1":"0"}),n.push({name:"require_phone_number",value:$("#require-phone-number").prop("checked")?"1":"0"}),n.push({name:"display_any_provider",value:$("#display-any-provider").prop("checked")?"1":"0"}),n.push({name:"company_working_plan",value:JSON.stringify(BackendSettings.wp.get())}),n.push({name:"book_advance_timeout",value:$("#book-advance-timeout").val()}),n.push({name:"display_cookie_notice",value:$("#display-cookie-notice").prop("checked")?"1":"0"}),n.push({name:"cookie_notice_content",value:$("#cookie-notice-content").trumbowyg("html")}),n.push({name:"display_terms_and_conditions",value:$("#display-terms-and-conditions").prop("checked")?"1":"0"}),n.push({name:"terms_and_conditions_content",value:$("#terms-and-conditions-content").trumbowyg("html")}),n.push({name:"display_privacy_policy",value:$("#display-privacy-policy").prop("checked")?"1":"0"}),n.push({name:"privacy_policy_content",value:$("#privacy-policy-content").trumbowyg("html")}),n},e.prototype.validate=function(){$("#general .has-error").removeClass("has-error");try{var n=!1;if($("#general .required").each(function(e,a){$(a).val()||($(a).closest(".form-group").addClass("has-error"),n=!0)}),n)throw new Error(EALang.fields_are_required);if(!GeneralFunctions.validateEmail($("#company-email").val()))throw $("#company-email").closest(".form-group").addClass("has-error"),new Error(EALang.invalid_email);return!0}catch(e){return Backend.displayNotification(e.message),!1}},window.SystemSettings=e}();